<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <link href="https://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="generator" content="Hugo 0.126.3">

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>博客修整及记录（进行中） &middot; IL随记</title>
  <meta name="description" content="" />

  
  <link type="text/css" rel="stylesheet" href="/css/print.css" media="print">
  <link type="text/css" rel="stylesheet" href="/css/poole.css">
  <link type="text/css" rel="stylesheet" href="/css/syntax.css">
  <link type="text/css" rel="stylesheet" href="/css/hyde.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Abril+Fatface|PT+Sans:400,400i,700">


  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/favicon.png">

  
  
</head>

  <body class="theme-base-09 layout-reverse">
  <aside class="sidebar">
  <div id = "title" class="container sidebar-sticky">
    <div class="sidebar-about">
      <a href="/">
      <h1>IL随记</h1></a>
      <p class="lead">
       流水帐而已，随手写写 
      </p>
    </div>

    <nav>
      <ul class="sidebar-nav">
        <li><a href="/">Home</a> </li>
        <li><a href="https://github.com/illuz/"> Github </a></li>
      </ul>
    </nav>

    <p>&copy; 2024. All rights reserved. </p>
  </div>
  
    <script type="text/javascript" src="/js/toc.js" defer></script>
    <div id="toc" class="container sidebar-toc">
      <div class="sidebar-toc-title">博客修整及记录（进行中）</div>
      <nav id="TableOfContents">
  <ul>
    <li><a href="#目前待办">目前待办</a></li>
    <li><a href="#评论功能-disqus">评论功能 Disqus</a></li>
    <li><a href="#favicon">favicon</a></li>
    <li><a href="#rss-全文输出">RSS 全文输出</a></li>
    <li><a href="#google-analytic">Google Analytic</a></li>
    <li><a href="#使用-algolia-进行文章搜索">使用 algolia 进行文章搜索</a></li>
    <li><a href="#其它注意点">其它注意点</a></li>
  </ul>
</nav>
    </div>
  
</aside>

    <main class="content container">
    <h2>
  <a href="/">Home</a>
  
  / <a href="/categories/%E6%8A%80%E6%9C%AF/">技术</a>
</h2>

<div class="post">
  <h1>博客修整及记录（进行中）</h1>
  
<em>
    <time datetime=2024-06-05T10:16:37&#43;0800 class="post-date">
        <b>创建时间：</b>2024/06/05 10:16
    </time>
</em>




<hr>

  <h2 id="目前待办">目前待办</h2>
<ul>
<li><input checked="" disabled="" type="checkbox"> 添加评论功能 Disqus</li>
<li><input checked="" disabled="" type="checkbox"> favicon</li>
<li><input checked="" disabled="" type="checkbox"> RSS 全文输出</li>
<li><input disabled="" type="checkbox"> 增加文章搜索，使用 algolia search</li>
<li><input checked="" disabled="" type="checkbox"> Google Analytic</li>
<li><input checked="" disabled="" type="checkbox"> 头部添加文章时间、Tags 展示、Category 展示</li>
<li><input checked="" disabled="" type="checkbox"> 添加文章目录 TOC，参考 <a href="https://ichochy.com/">https://ichochy.com/</a> 的效果</li>
<li><input disabled="" type="checkbox"> 代码展示效果优化</li>
<li><input checked="" disabled="" type="checkbox"> 增加上一篇下一篇</li>
<li><input checked="" disabled="" type="checkbox"> 增加相关文章</li>
<li><input disabled="" type="checkbox"> 从 LogSeq 自动同步生成文章过来</li>
</ul>
<h2 id="评论功能-disqus">评论功能 Disqus</h2>
<p>Hugo 自带对 Disqus 的支持： <a href="https://gohugo.io/content-management/comments/">https://gohugo.io/content-management/comments/</a></p>
<p>只要配置一下 hugo.toml 就行了，hyde 主题已经自带了 disqus 了。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-toml" data-lang="toml"><span style="display:flex;"><span>[<span style="color:#a6e22e">services</span>]
</span></span><span style="display:flex;"><span>  [<span style="color:#a6e22e">services</span>.<span style="color:#a6e22e">disqus</span>]
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">shortname</span> = <span style="color:#e6db74">&#39;your-disqus-shortname&#39;</span>
</span></span></code></pre></div><h2 id="favicon">favicon</h2>
<p>随便弄了一个。</p>
<h2 id="rss-全文输出">RSS 全文输出</h2>
<p>将官方的 rss.xml 覆盖到 layouts/_default/rss.xml，然后在 description 后面加上 content 就行了：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span>      <span style="color:#f92672">&lt;description&gt;</span>{{ .Summary | transform.XMLEscape | safeHTML }}<span style="color:#f92672">&lt;/description&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;content:encoded&gt;</span>{{ .Content | safeHTML }}<span style="color:#f92672">&lt;/content:encoded&gt;</span>
</span></span></code></pre></div><h2 id="google-analytic">Google Analytic</h2>
<p>按 hyde 主题的 readme 提示配置后没效果，发现新的 Hugo 配置变了，现在得使用下面的配置：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-toml" data-lang="toml"><span style="display:flex;"><span>[<span style="color:#a6e22e">services</span>]
</span></span><span style="display:flex;"><span>  [<span style="color:#a6e22e">services</span>.<span style="color:#a6e22e">googleAnalytics</span>]
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">id</span> = <span style="color:#e6db74">&#39;G-xxx&#39;</span>
</span></span></code></pre></div><h2 id="使用-algolia-进行文章搜索">使用 algolia 进行文章搜索</h2>
<p>algolia 是个好东西，就是内容不太方便推过去，总不能一直跑个 node 程序。</p>
<p>所以解决方案是：</p>
<ol>
<li>配一个 Github Action 跑 node 程序，把内容推到 algolia</li>
<li>在 git push 时，触发 githook，本地去跑 node 程序，把内容推到 algolia</li>
</ol>
<p>用 Github Action 比较方便，我在其它环境下改文章也就不用去配置 node 环境了。</p>
<p>参考文章： <a href="https://www.kiroule.com/article/automate-data-upload-to-algolia-index-with-github-actions/">https://www.kiroule.com/article/automate-data-upload-to-algolia-index-with-github-actions/</a></p>
<p>TODO</p>
<h2 id="其它注意点">其它注意点</h2>
<ul>
<li>需要将 hasCJKLanguage 设置成 true，否则 summaryLength 会以 word 为单位计算，而不是字符。</li>
</ul>

  



  
<div class="pagination">
    <span class="pagination-item older">
        
        <a href="/post/daily/write-ahead/" class="pag-link">上一篇</a>
        
    </span>
    <span class="pagination-item newer">
        
        下一篇
        
    </span>
</div>

</div>

<h2>Comments</h2>
<div id="disqus_thread"></div>
<script>
    window.disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "illuzsblog" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </main>

    
      
  
    
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-L6RWMNY4C6"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-L6RWMNY4C6');
        }
      </script>
    
  


    
  </body>
</html>
